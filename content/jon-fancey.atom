<!--Generated by a crappy script that Craig Andera wrote : https://github.com/candera/cs-atom--><feed xmlns="http://www.w3.org/2005/Atom" xmlns:thr="http://purl.org/syndication/thread/1.0"><id>feed-id</id><updated>2011-12-25T08:45:04.682-05:00</updated><title type="text">Blog Title Here</title><generator version="7.00" uri="http://www.blogger.com">Blogger</generator><entry><id>46481</id><published>2007-03-15T18:02:00.0-05:00</published><updated>2007-03-15T18:02:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">What a week</title><content type="html">&lt;p&gt;So, I'm sitting in Sea-Tac airport waiting to return home with &lt;a href="http://geekswithblogs.net/cyoung"&gt;Charles Young &lt;/a&gt;from the MVP Summit. Not only has it been great to meet and put so many faces to names but the whole experience was fantastic. Of course, it pretty much rained all week, but I certainly can't complain about that.&lt;/p&gt;
&lt;p&gt;A big thanks go out to all the people behind the organization and especially &lt;a href="http://blogs.msdn.com/biztalk_server_team_blog"&gt;Marjan Kalantar&lt;/a&gt; from the product group for putting together a great show and giving us plenty to think about.&lt;/p&gt;
&lt;p&gt;The fact that I am writing this on &lt;a href="http://www.pluralsight.com"&gt;pluralsight &lt;/a&gt;rather than &lt;a href="http://www.jonfancey.com/default.aspx"&gt;jonfancey.com &lt;/a&gt;is also of course very significant. I've just joined up and will be starting to teach Applied BizTalk alongside my new BizTalk and WF collegues, Jon Flanders, Aaron and Matt over the coming weeks/months. I can't wait.&lt;/p&gt;</content><author><name>jon-fancey</name></author><thr:total>1</thr:total></entry><entry><id>46505</id><published>2007-03-19T04:07:00.0-05:00</published><updated>2007-03-19T04:07:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What a week</title><content type="html">Hi Jon.  It was a pleasure to meet and have all of our valued MVPs on campus.  I’m really happy to know that you found the summit beneficial &amp;amp; enjoyed it as much as we did.  Looking forward to seeing you again at future events!  Marjan</content><author><name>Anonymous</name></author><thr:in-reply-to ref="46481"></thr:in-reply-to></entry><entry><id>47683</id><published>2007-06-07T12:00:00.0-05:00</published><updated>2007-06-07T12:00:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">What if you like SOAP and don't like web references? - Redux</title><content type="html">&lt;p&gt;&lt;font size="2" face="Arial"&gt;I started the &lt;/font&gt;&lt;a href="http://www.jonfancey.com/default.aspx?key=2006-11-08T20:48:14Z"&gt;&lt;font size="2" face="Arial"&gt;first &lt;/font&gt;&lt;/a&gt;&lt;font size="2" face="Arial"&gt;post on this, with "this is interesting, sort of" - well judging by the number of people who've asked me for more details on doing it I think I was wrong. Apologies to all, I've been so busy the last few months that I just haven't had time to get some code examples up there...until now!&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size="2" face="Arial"&gt;Get the code &lt;/font&gt;&lt;a href="http://www.jonfancey.com/downloads/genericrouter.zip"&gt;&lt;font size="2" face="Arial"&gt;here&lt;/font&gt;&lt;/a&gt;&lt;font size="2" face="Arial"&gt; to try this for yourself. Essentially, this is an example of what I discussed before, where you can do dynamic sends using the SOAP adapter. For those that haven't tried it, you might be thinking, what's the big deal, but as I mentioned, theres a couple of gotchas which stop this from working as cleanly as with other adapters. &lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size="2" face="Arial"&gt;The first is that you can't just set the OutboundTransportLocation from an orchestration (or receive pipeline) as you would do for other dynamic adapters. This is because the Uri scheme (the bit before the address, e.g. HTTP://) is used by BizTalk to lookup the adapter alias from the adm_AdapterAlias table in the management database. As the SOAP adapter only supports SOAP over HTTP you must set the scheme to SOAP:// in order to route it correctly. But this won't work because then the ASMX proxy plumbing (called by the adapter) will fail as it is expecting HTTP:// and will make the call using SOAP:// instead. The way round this is to set the Microsoft.XLANGs.BaseTypes.Address property of the port - which will deliver the message to the SOAP adapter - and then set the OutboundTransportLocation context property in the Send pipeline. The example code shows how to call a Web service using this technique by pulling the Uri to send the message to from the inbound message itself. This dynamic routing is extremely powerful and very useful for Web services.&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;font face="Arial"&gt;&lt;font size="2"&gt;The second gotcha is around the use of a proxy. When you add a Web reference to a BizTalk project, similar (but not identical) logic is used to classic ASMX whereby a proxy is generated from the URL you provide in the wizard. The proxy contains the Web methods that map to the operations on the provider's WSDL. The problem is that you end up baking the service interface into the client. Rather than creating a client proxy for each client (which is a pain), what we really want is a generic proxy capable of calling &lt;em&gt;any &lt;/em&gt;client. Worse than this, ASMX forces the SOAPAction HTTP header (for SOAP 1.1 support) to match the name of this method which makes it very inflexible. Changing this however turns out to be pretty easy using reflection. The code in the download overrides the Invoke method of the &lt;font color="#008080"&gt;SoapHttpClientProtocol &lt;font color="#000000"&gt;in the System.Web.Services.Protocols namespace. Normally this method is called by the Webmethod passing the name of the Webmethod itself (which is Dispatch in the sample). Invoke itself then uses reflection to get the method parameters etc to formulate the call to the service implementation. To keep things simple the code here only deals with a single parameter, XmlNode. Of course you could easily extend this if you wanted to but then you'd be wanting to pass multiple Xml docs which kinda goes against the philosophy of doc/lit. The orch's Send port is then configured to use our generic proxy and call the Dispatch method to make this all work.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size="2" face="Arial"&gt;There are three projects in the solution, BizTalk (with the Send pipeline and Orch), the generic proxy called by the SOAP send adapter and a simple Web service implementation to call. Simply compile everything, deploy the BizTalk project and GAC the generic proxy assembly. Deploying will create all the ports (sorry about the names) - just create a folder c:\webrefsfilein and enlist and start the orch. You can then drop in the xml file in the Test Data folder in the BizTalk project. There is tracing code throughout, so grab the invaluable sysinternals (sorry, Microsoft) tool, Debug Viewer &lt;/font&gt;&lt;a href="http://www.microsoft.com/technet/sysinternals/Miscellaneous/DebugView.mspx"&gt;&lt;font size="2" face="Arial"&gt;here&lt;/font&gt;&lt;/a&gt;&lt;font size="2" face="Arial"&gt;. Run the solution (with the Web service as the default startup). When you drop the file in it should call the Web service (specified in the file) and return a result, logging the call (see pic below). Enjoy!&lt;/font&gt;&lt;/p&gt;&lt;font size="2" face="Arial"&gt;&lt;img src="http://www.jonfancey.com/images/debugview.JPG" /&gt;&lt;/font&gt;</content><author><name>jon-fancey</name></author><thr:total>11</thr:total></entry><entry><id>47706</id><published>2007-06-10T19:19:00.0-05:00</published><updated>2007-06-10T19:19:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">Link Listing - June 10, 2007</title><content type="html"> Give it a REST! [Via: Anil John ] GWT a Year Later: Was it the correct level of abstraction? [Via: Dietrich...</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>47919</id><published>2007-07-04T03:34:00.0-05:00</published><updated>2007-07-04T03:34:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">Hello,
&lt;br /&gt;
&lt;br /&gt;I am trying out your solution and got a 'NullReferenceException: Object reference not set to an instance of an object' because the methode SoapHttpClientProtocol.ReadResponse in the ServiceProxy returns a one object array which is null. Any idea ?
&lt;br /&gt;
&lt;br /&gt;Thanks for your support!</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48011</id><published>2007-07-17T21:35:00.0-05:00</published><updated>2007-07-17T21:35:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">Is this type of Dynamic Routing possible with BizTalk R2 with WCF adapters
&lt;br /&gt;I am getting the following error when I am usiing WCF-WSHttp instead of SOAP
&lt;br /&gt;"
&lt;br /&gt;The Messaging Engine could not send the message to the dynamic send port. The outbound transport could not be resolved because a matching transport protocol prefix could not be derived from the URL "WCF-WSHttp://localhost:1343/DynamicWCFservice.WCF/Service.svc"
&lt;br /&gt;</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48112</id><published>2007-07-30T10:34:00.0-05:00</published><updated>2007-07-30T10:34:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">Does this work with XML-RPC?</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48151</id><published>2007-08-05T20:46:00.0-05:00</published><updated>2007-08-05T20:46:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">First of all I would like to thank Jon Fancey for the wonderful work that he has done. I have applied your idea in the send pipeline to change the scheme back to http:// and it works. Once again thank you Jon.</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48173</id><published>2007-08-08T11:07:00.0-05:00</published><updated>2007-08-08T11:07:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">have you tried the override BTS.OutboundTransportType = "SOAP"?  this is the type override according to the BTS help.
&lt;br /&gt;I haven't got either to work, but that may be unrelated.  Thanks for your work.
&lt;br /&gt;Doug
&lt;br /&gt;</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48938</id><published>2007-11-05T01:28:00.0-05:00</published><updated>2007-11-05T01:28:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">I have the same problem like Iztok Koban: 
&lt;br /&gt;
&lt;br /&gt;I am trying out your solution and got a 'NullReferenceException: Object reference not set to an instance of an object' because the methode SoapHttpClientProtocol.ReadResponse in the ServiceProxy returns a one object array which is null. Any idea ? 
&lt;br /&gt;</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>49300</id><published>2007-11-27T06:49:00.0-05:00</published><updated>2007-11-27T06:49:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">If you step through your code you will see that the solution does indeed call the underlying web service.
&lt;br /&gt;
&lt;br /&gt;I think the NullReferenceException happens becasue the ServiceProxy thinks the web service call is one way; therefore, it always returns null.
&lt;br /&gt;
&lt;br /&gt;The only hurdle to getting this working is to somehow get the ServiceProxy to make the call request response instead of one way. 
&lt;br /&gt;
&lt;br /&gt;I have no clue how to do that - I checked and tried all kinds of things and always get the same result.
&lt;br /&gt;
&lt;br /&gt;</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>50266</id><published>2008-02-18T07:19:00.0-05:00</published><updated>2008-02-18T07:19:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">Hi Jon,
&lt;br /&gt;Thanks for a great post. I finally managed to get a dynamic send to a SOAP web service working. For what it's worth here are my findings:
&lt;br /&gt;
&lt;br /&gt;1) I created a simple web service and then generated a proxy class using wsdl.exe. I then added the proxy to its own project and built this as a strong named assembly, deployed to the GAC.
&lt;br /&gt;
&lt;br /&gt;2) I didn't need to use a soap:// prefix on the URI. Simply setting the Microsoft.XLANGs.BaseTypes.TransportType property on the send port to "SOAP" did the job of directing the request to the SOAP adapter.
&lt;br /&gt;
&lt;br /&gt;3) The request would fail if I did not populate the SOAP.TypeName property. This should be set to the Namespace.Class of the proxy.
&lt;br /&gt;
&lt;br /&gt;4) The SOAP.AssemblyName property should be set to the Namespace.Class, Assembly, Version, Culture, PublicKeyToken. e.g.
&lt;br /&gt;msgSendRequest(SOAP.AssemblyName) = "BtsTest.CalcWebServiceProxy.CalcService,CalcWebServiceProxy, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b713f1108bae3109";
&lt;br /&gt;
&lt;br /&gt;5) The Operation on the dynamic Send Port needs to use the same name as the WebMethod being called.
&lt;br /&gt;
&lt;br /&gt;6) The method signature of the WebMethod should be public XmlNode MyMethod(XmlNode Message)
&lt;br /&gt;
&lt;br /&gt;Hope this helps.
&lt;br /&gt;</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>50283</id><published>2008-02-20T14:45:00.0-05:00</published><updated>2008-02-20T14:45:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: What if you like SOAP and don't like web references? - Redux</title><content type="html">I have put the steps that worked for me more formally on my blog at  http://biztalk-dev.blogspot.com/2008/02/dynamic-soap-adapters.html
&lt;br /&gt;
&lt;br /&gt;Cheers</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>69864</id><published>2009-07-08T21:12:41.0-05:00</published><updated>2009-07-08T21:12:41.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">hosted call center</title><content type="html">Are you Hiring the Best Candidates for Every Job Level within your Contact Center?</content><author><name>Anonymous</name></author><thr:in-reply-to ref="47683"></thr:in-reply-to></entry><entry><id>48317</id><published>2007-08-29T06:01:00.0-05:00</published><updated>2007-08-29T06:01:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">New MSDN article on BizTalk and IBM technologies</title><content type="html">&lt;p&gt;My latest paper on integrating BizTalk and IBM technologies is now up on &lt;a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=ce46a7d0-93b7-4076-b36b-f1c62715b5fa&amp;amp;displaylang=en"&gt;MSDN&lt;/a&gt; covering WebSphere MQ, DB2, Host files and applications. I'm assured it will be HTML'd and added to the library in the not too distant future.&lt;/p&gt;
&lt;p&gt;feedback always welcome...&lt;br /&gt;&lt;/p&gt;</content><author><name>jon-fancey</name></author><thr:total>2</thr:total></entry><entry><id>48320</id><published>2007-08-29T08:24:00.0-05:00</published><updated>2007-08-29T08:24:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: New MSDN article on BizTalk and IBM technologies</title><content type="html">I think link is wrong it points to a MSDN subsciber site</content><author><name>Anonymous</name></author><thr:in-reply-to ref="48317"></thr:in-reply-to></entry><entry><id>48321</id><published>2007-08-29T10:33:00.0-05:00</published><updated>2007-08-29T10:33:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">re: New MSDN article on BizTalk and IBM technologies</title><content type="html">oops - thanks, link fixed.</content><author><name>Anonymous</name></author><thr:in-reply-to ref="48317"></thr:in-reply-to></entry><entry><id>48797</id><published>2007-10-18T00:08:00.0-05:00</published><updated>2007-10-18T00:08:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Public BizTalk R2 course coming up</title><content type="html">&lt;p&gt;The spotlight is certainly on BizTalk at the moment both inside and outside Microsoft. What with R2 shipping and the BPM conference at the end of the month there's no shortage of stuff to look at.&lt;/p&gt;
&lt;p&gt;If you want more, focussed content, on the new features I'll be teaching a public offering of the R2 course in a couple of weeks (beginning 6th Nov) in Waltham, MA near Boston. There's still a couple of slots free if you're quick...&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>48899</id><published>2007-10-30T14:25:00.0-05:00</published><updated>2007-10-30T14:25:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">the cat is finally out of the bag...</title><content type="html">&lt;p&gt;&lt;a href="http://www.microsoft.com/presspass/press/2007/oct07/10-30OsloPR.mspx?rss_fdn=Press%20Releases"&gt;http://www.microsoft.com/presspass/press/2007/oct07/10-30OsloPR.mspx?rss_fdn=Press%20Releases&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;:-)&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>53879</id><published>2008-10-13T03:28:00.0-05:00</published><updated>2008-10-13T03:28:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Upcoming stuff</title><content type="html">&lt;p&gt;Ok, I've been busy. Now that's out the way, I'll talk about some of the stuff I've been/will be doing.&lt;/p&gt;
&lt;p&gt;First up, I'll be at PDC next week and am really looking forward to it. There's a ton of new stuff now being 'leaked' from the big house ahead of this event, Oslo, Dublin and Zurich to name a few. Should be a blast.&lt;/p&gt;
&lt;p&gt;Following quickly on from that I'll be at TechEd Europe during the IT Pro Week (3-7th Nov). I'm doing a session with Steve Smaller from the HIS Product Group on MOSS integration wtih some of the curernt and new stuff coming out of that group. Haven't finalized my travel plans be would expect to be there from Wednesday 5th onwards.&lt;/p&gt;
&lt;p&gt;I've been digging into MOSS a lot lately, and I think I like it.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>73694</id><published>2009-11-26T04:53:45.0-05:00</published><updated>2009-11-26T04:53:45.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Installing public beta of SharePoint 2010</title><content type="html">&lt;p&gt;Ok, here's what I did on my flight home from LAX/PDC.&lt;/p&gt;  &lt;p&gt;Because I didn't have a network connection at 30,000 ft I downloaded everything I thought I might need ahead of time, guided by the following link, which was posted a couple of weeks before PDC:&lt;/p&gt;  &lt;p&gt;&lt;a href="http://blogs.msdn.com/opal/archive/2009/10/25/sharepoint-2010-pre-requisites-download-links.aspx"&gt;http://blogs.msdn.com/opal/archive/2009/10/25/sharepoint-2010-pre-requisites-download-links.aspx&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;Note that SP is now 64-bit only and the beta only installs on Win2K8 - there are rumours that Win7 will be supported for RTM though. I created a Hyper-V VM running on Win2K8 R2.&lt;/p&gt;  &lt;ol&gt;   &lt;li&gt;Download everything from above link&lt;/li&gt;    &lt;li&gt;Added web server role to VM&lt;/li&gt;    &lt;li&gt;Install SQL Server Dev x64 - with pretty much all options checked&lt;/li&gt;    &lt;li&gt;Because 'I know best' I installed geneva x64 not the AMD named-one&lt;/li&gt;    &lt;li&gt;Installed chart - mschart.exe&lt;/li&gt;    &lt;li&gt;Installed adomd - analysis services components&lt;/li&gt;    &lt;li&gt;Ran KB976462 – WCF fix&lt;/li&gt;    &lt;li&gt;Ran SQL 2008 rollup KB976761-x64&lt;/li&gt;    &lt;li&gt;Ran the SP installer - clicked on install prereqs&lt;/li&gt;    &lt;li&gt;Interestingly it told me geneva wasn't installed, so installed the amd one as per the above blog and that did the trick&lt;/li&gt;    &lt;li&gt;This was enough for the prereq wizard to complete successfully&lt;/li&gt;    &lt;li&gt;Clicking finish should close it, I actually went round the loop a couple of times and then it closed&lt;/li&gt;    &lt;li&gt;Next you'll need the key from where you downloaded it. &lt;/li&gt;    &lt;li&gt;I just went for standalone installation. This will install everything onto SQL Express&lt;/li&gt;    &lt;li&gt;When this completes you can launch the configuration wizard&lt;/li&gt;    &lt;li&gt;Install vs2010 beta 2 - this will install the new SP project templates and tools as well&lt;/li&gt;    &lt;li&gt;Sit back, relax :-)&lt;/li&gt; &lt;/ol&gt;  &lt;p&gt;This is the quickest way to get it going. Installing SQL 2008 seemed to save me some time as I didn’t need a lot of the individual pre-reqs that a pur SQL Express install would have required. However, there are a few issues you'll be left with if you just used built in accounts that will require cleaning up post-deployment and configuration. Some of this is covered in the following link:&lt;/p&gt; &lt;a href="http://sharepoint.microsoft.com/blogs/fromthefield/Lists/Posts/Post.aspx?ID=112" title="http://sharepoint.microsoft.com/blogs/fromthefield/Lists/Posts/Post.aspx?ID=112

"&gt;http://sharepoint.microsoft.com/blogs/fromthefield/Lists/Posts/Post.aspx?ID=112    &lt;/a&gt; I’ll discuss this in a future post (soon).</content><author><name>jon-fancey</name></author></entry><entry><id>73695</id><published>2009-11-26T04:58:55.0-05:00</published><updated>2009-11-26T04:58:55.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Last week, last year</title><content type="html">&lt;p&gt;I spent last week at PDC, and last weekend at our annual retreat in Palm Springs. Both were awesome for different reasons. The former, because everyone was finally given access to bits people have been waiting for, for some time, such as SharePoint 2010. And then there was the &lt;a href="http://microsoftpdc.com/tablet"&gt;free&lt;/a&gt; laptop. I’m already planning to double the memory in it and maybe even add an SSD, it’s a great piece of kit, especially if it lives up to it’s claimed 8 hour battery life. PluralSight had a great PDC, we seem to have the right product with On Demand that people want right now and are actively driving to add new content on an almost weekly basis.&lt;/p&gt;  &lt;p&gt;The second half of my time was spent close to Palm Springs, at the retreat. This is first one I’ve had the pleasure to attend, the idea being that all the staff and associates hang out for the weekend, giving tech talks to each other, and generally eating, chatting and drinking. Awesome.&lt;/p&gt;  &lt;p&gt;I’ve been pretty quiet on the blog scene over the last year for a bunch of reasons, I’m hoping that will change and I can get back to it as I dive into a lot of the new tech unveiled last week.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>75252</id><published>2010-02-23T01:37:23.0-05:00</published><updated>2010-02-23T01:37:23.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">New SharePoint whitepaper published</title><content type="html">&lt;p&gt;A SharePoint/MOSS whitepaper I finished a while back has finally made it onto MSDN &lt;a href="http://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;amp;FamilyID=c73dfdd7-2096-491c-812f-ef529a7a2bc9"&gt;here&lt;/a&gt;. There’s a link off the &lt;a href="http://msdn.microsoft.com/biztalk"&gt;BizTalk dev center&lt;/a&gt; too.&lt;/p&gt;  &lt;p&gt;If you’re not a user of Host Integration Server’s mainframe/midrange capabilities, don’t be put off. I focus on WSS/MOSS 2007 integration scenarios in this paper which apply not just to IBM technologies but many others such as Oracle DB too. Of note is the new WCF MQ channel stack providing access to WebSphere MQ from a supported WCF channel for the first time. Remember that most BizTalk licences include HIS so you have access to all the relevant bits.&lt;/p&gt;  &lt;p&gt;Feedback welcome. Enjoy.&lt;/p&gt;</content><author><name>jon-fancey</name></author><thr:total>1</thr:total></entry><entry><id>75255</id><published>2010-02-23T12:38:49.0-05:00</published><updated>2010-02-23T12:38:49.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">Linked - List</title><content type="html">Linked - List</content><author><name>Anonymous</name></author><thr:in-reply-to ref="75252"></thr:in-reply-to></entry><entry><id>95391</id><published>2010-09-24T03:42:00.0-05:00</published><updated>2010-09-24T03:42:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">BizTalk 2010 RTM'd</title><content type="html">&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I just got back from another interesting trip to Redmond.&lt;/p&gt;
&lt;p&gt;One thing that was in my inbox was confirmation that BizTalk 2010 ships next week. If you've been tracking the expected release date, announced a while back as Q3 you'll be pleased to see that September 31st will be the day you can get hold of it - next Friday.&lt;/p&gt;
&lt;p&gt;There's a couple of things in there that weren't in the public betas that I'll talk about next week.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PS I know September 31st is *not* Q3 ;-)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>95403</id><published>2010-09-24T15:00:00.0-05:00</published><updated>2010-09-24T15:00:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Goodbye &amp;quot;Oslo&amp;quot;</title><content type="html">&lt;p&gt;Don Box explains where Microsoft is now going with the Oslo model repository, Quadrant, the tool to manipulate it and the "M" language. See if you can guess which one didn't get cut before you follow this &lt;a href="http://blogs.msdn.com/b/modelcitizen/archive/2010/09/22/update-on-sql-server-modeling-ctp-repository-modeling-services-quot-quadrant-quot-and-quot-m-quot.aspx"&gt;link&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;</content><author><name>jon-fancey</name></author><thr:total>2</thr:total></entry><entry><id>95486</id><published>2010-09-27T06:07:56.0-05:00</published><updated>2010-09-27T06:07:56.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">Interesting Finds: September 27, 2010</title><content type="html">Interesting Finds: September 27, 2010</content><author><name>Anonymous</name></author><thr:in-reply-to ref="95403"></thr:in-reply-to></entry><entry><id>96364</id><published>2010-10-26T16:14:04.0-05:00</published><updated>2010-10-26T16:14:04.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#comment"></category><title type="text">More talent leaves the building</title><content type="html">Whilst Ray Ozzie’s planned departure last week was made pretty public – it was on the BBC site. Which</content><author><name>Anonymous</name></author><thr:in-reply-to ref="95403"></thr:in-reply-to></entry><entry><id>96362</id><published>2010-10-26T15:43:45.0-05:00</published><updated>2010-10-26T15:43:45.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Introduction to AMQP for .Net developers</title><content type="html">&lt;p&gt;I’ve been digging into AMQP for a little while now. If you don’t know what it is, then you can read the details at &lt;a href="http://www.amqp.org"&gt;the AMQP official Web site&lt;/a&gt;. If you want the abridged version, and want to know why it’s interesting, please read on.&lt;/p&gt;  &lt;p&gt;Interesting thing #1&lt;/p&gt;  &lt;p&gt;Advanced Message Queuing Protocol is an open source effort run by a number of companies in collaboration. They must have all looked at IBM WebSphere MQ, MSMQ and others and presumably decided they could write something similar (or better) themselves and make it available to all. No fee-based licensing. And support cross-platform comes free too. Right now there are implementations on Linux, Windows and others. There’s interop too with WCF and JMS programming models. It high performance, low latency, with some implementations claiming stats in the order of 1M messages per second. That’s pretty good.&lt;/p&gt;  &lt;p&gt;Interesting thing #2&lt;/p&gt;  &lt;p&gt;Microsoft are a contributor to AMQP. David Ingham, someone who I’ve had the pleasure of meeting several times, is a key advocate, and you can see a presentation he gave recently on the subject &lt;a href="http://www.amqp.org/confluence/download/attachments/4161599/2010.06.08-AMQP-F2F-WCF-Mapping.pdf?version=1&amp;amp;modificationDate=1276040998000"&gt;here&lt;/a&gt;. Microsoft’s involvement is in QPid – a specific cross-platform implementation of AMQP. Microsoft have contributed a WCF client implementation which wraps the standard client libraries.&lt;/p&gt;  &lt;p&gt;Interesting thing #3&lt;/p&gt;  &lt;p&gt;As a BizTalk (and AppFabric) developer, I find all things integration interesting. With the WCF binding I can talk AMQP to other systems on one side and something else on the other. And I can do this using a number of ‘built-in’ patterns such as direct, topic or fan-out. And it’s extensible, so you can implement your own too.&lt;/p&gt;  &lt;p&gt;The patterns are mostly what you’d expect. Direct enables point to point communication from a ‘provider’ to a ‘consumer’ through a broker. e.g. provider puts message on queue, consumer retrieves messages from queue. One provider is effectively bound to a single consumer through the queue. In this case the queue is private to this communication. The Topic pattern uses a subscription mechanism – matching on a ‘key’ – a pattern-based match allowing hierarchical matching such as “news.stocks” or “news.*”. This allows multiple consumers to receive queue messages. This can use public or private queues. Fan out enables 1:N delivery semantics where a single provider can publish messages that one (or none) or more consumers can subscribe to.&lt;/p&gt;  &lt;p&gt;Interesting thing #4&lt;/p&gt;  &lt;p&gt;It’s very straightforward to use. There are very few concepts you need to know to get going and some of them you are probably already familiar with, even more so if you are familiar with WCF. The three main concepts are queues, exchanges and bindings. The host for all this stuff is the broker. It’s the broker your apps will connect to in order to facilitate message exchange.&lt;/p&gt;  &lt;p&gt;To get started you need to download a few bits and pieces. To run AMQP I’ve been using (of course) the Qpid implementation. This gives me the broker implementation and libraries to program against. These are the &lt;a href="http://mirrors.enquira.co.uk/apache//qpid/0.6/qpid-dotnet-0-10-0.6.zip"&gt;.Net Client libraries&lt;/a&gt; and the &lt;a href="http://mirrors.enquira.co.uk/apache//qpid/0.6/qpid-wcf-0.6.zip"&gt;WCF binaries&lt;/a&gt;. The .Net Client library download gives you a broker implementation. To spin this up simply open a command prompt navigate to the unzipped folder and enter:&lt;/p&gt;  &lt;p&gt;&lt;font face="Courier New"&gt;qpidd --auth no&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;The auth option turns off authentication, to make getting started and testing scenarios easier. Now there’s a broker running you can create a queue and bind it using the exchange pattern type you want:&lt;/p&gt;  &lt;p&gt;&lt;font face="Courier New"&gt;org.apache.qpid.client.Client client = new org.apache.qpid.client.Client();     &lt;br /&gt;client.Connect("localhost", 5672, "", "", "");      &lt;br /&gt;org.apache.qpid.client.ClientSession session = (ClientSession)client.CreateSession(0);   &lt;br /&gt;session.QueueDeclare("usa");      &lt;br /&gt;session.ExchangeBind("usa", "amq.direct", "usa");      &lt;br /&gt;session.Close();      &lt;br /&gt;client.Close();&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;I just put this in a console app. You need to set a reference in your project to the Apache.Qpid.Interop.dll assembly to bring in the types needed. By default (and convention) the broker runs on port 5672, this code simply creates a client, connects to the broker and creates a session. Sessions allow the creation of queues and bindings. These can be transient or durable. Transient means that I lose the queues (and their contents) between broker restarts whereas with durable, QPid ensures everything survives process (and server) recycles.&lt;/p&gt;  &lt;p&gt;Now let’s look at how to use the WCF channel. This example is based on the WCFToWCFPubSub sample in the WCF binaries zip, in /wcf/samples/channel (which I couldn’t get working as-is for the life of me).&lt;/p&gt;  &lt;p&gt;First, let’s take the consumer. As this is WCF we’ll create a service contract, by defining an interface and implementing it. This is hopefully self-explanatory. What we want to do is have this method invoked when we receive a message on the queue we’re connected to:&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;// Define a service contract.      &lt;br /&gt;[ServiceContract]      &lt;br /&gt;public interface IHelloService      &lt;br /&gt;{      &lt;br /&gt;    [OperationContract(IsOneWay = true)]      &lt;br /&gt;    void SayHello(string name);      &lt;br /&gt;} &lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;// Service class which implements the service contract.     &lt;br /&gt;public class HelloService : IHelloService      &lt;br /&gt;{      &lt;br /&gt;    [OperationBehavior]      &lt;br /&gt;    public void SayHello(string name)      &lt;br /&gt;    {      &lt;br /&gt;        Console.WriteLine("Hello " + name);      &lt;br /&gt;    }      &lt;br /&gt;}&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;To set this up, consider the code below. First, we create a binding using the AMQP channel implementation. For this we need to set a project reference to the Apache.Qpid.Channel.dll assembly. Next, we create a service host providing the obligatory URL. This is useful if we want to expose metadata on our endpoint for example. Finally, we add a service endpoint, specifying the AMQP uri address, the binding, and the contract. Standard stuff. The AMQP uri is basically “amqp” as the scheme and I’m using &lt;strong&gt;usa&lt;/strong&gt; as the queue name, which is the key used to associate the sender to the receiver in a direct exchange pattern.&lt;/p&gt; &lt;font face="Courier New"&gt;CustomBinding amqpBinding = new CustomBinding();   &lt;br /&gt;amqpBinding.Elements.Add(new BinaryMessageEncodingBindingElement());    &lt;br /&gt;amqpBinding.Elements.Add(new AmqpTransportBindingElement());&lt;/font&gt;  &lt;p&gt;&lt;font face="courier new"&gt;ServiceHost serviceHost = new ServiceHost(typeof(HelloService), new Uri[] { new Uri("&lt;/font&gt;&lt;a href="http://localhost:8080/HelloService&amp;quot;)"&gt;&lt;font face="courier new"&gt;http://localhost:8080/HelloService")&lt;/font&gt;&lt;/a&gt;&lt;font face="courier new"&gt; }); &lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;Uri amqpUri = new Uri("amqp:usa");     &lt;br /&gt;serviceHost.AddServiceEndpoint(typeof(IHelloService), amqpBinding, amqpUri.ToString()); &lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;serviceHost.Open();&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;Now let’s look at how to write to our &lt;strong&gt;usa&lt;/strong&gt; queue. As before, I’m just creating a custom amqp binding. Then, the Uri specifies the exchange type – direct, and the routing key. This is the name of the queue, but doesn’t have to be, it just has to match what I specified on the other end in the consumer.&lt;/p&gt;  &lt;p&gt;&lt;font face="Courier New"&gt;CustomBinding amqpBinding = new CustomBinding();     &lt;br /&gt;amqpBinding.Elements.Add(new BinaryMessageEncodingBindingElement());      &lt;br /&gt;amqpBinding.Elements.Add(new AmqpTransportBindingElement());&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;Uri amqpClientUri = new Uri("amqp:amq.direct?routingkey=usa");     &lt;br /&gt;EndpointAddress endpointAddress = new EndpointAddress(amqpClientUri);&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;The next thing to do is create a channel:&lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;ChannelFactory&amp;lt;IHelloService&amp;gt; channelFactory = new ChannelFactory&amp;lt;IHelloService&amp;gt;(amqpBinding, endpointAddress);     &lt;br /&gt;IHelloService clientProxy = channelFactory.CreateChannel(); &lt;/font&gt;&lt;/p&gt;  &lt;p&gt;After this, we can simply use the proxy to the service contract implementation and call it, passing the parameter. Here I’ve just got a loop that will write five messages to the queue. &lt;/p&gt;  &lt;p&gt;&lt;font face="courier new"&gt;string name = "name";     &lt;br /&gt;for (int i = 0; i &amp;lt; 5; i++)      &lt;br /&gt;{                    &lt;br /&gt;   Console.WriteLine("Sending message: " + name + (i + 1));      &lt;br /&gt;   clientProxy.SayHello(name + (i+1));      &lt;br /&gt;}&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;If you try and run this and put a breakpoint on the SayHello method it will break each time the message is put. Pretty cool huh?&lt;/p&gt;  &lt;p&gt;Interesting thing #5&lt;/p&gt;  &lt;p&gt;Did I mention that it’s free, that it’s endorsed (through community involved) by Microsoft and has a .Net WCF library? :-)&lt;/p&gt;  &lt;p&gt;AMQP is an interesting technology that I think is overlooked by the majority of .Net developers. However, I believe that will change over time as it is adopted more and more as an alternative to the current commercial queuing technologies out there and gains more traction outside of it’s current main usage area in financial services.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>96363</id><published>2010-10-26T16:14:00.0-05:00</published><updated>2010-10-26T16:14:00.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">More talent leaves the building</title><content type="html">&lt;p&gt;Whilst Ray Ozzie’s planned departure last week was made pretty public – it was on the &lt;a href="http://search.bbc.co.uk/click/p/1/ds/main/t/News%2520%252d%2520Business%2520%252d%2520Microsoft%2520software%2520head%2520Ray%2520Ozzie%2520resigns/id/17231391416301128813038269491289000/sp/012791681727ae8920bf669f526de1ea/-/http%253a%252f%252fwww%252ebbc%252eco%252euk%252fnews%252fbusiness%252d11571046"&gt;BBC&lt;/a&gt; site. Which is my definition of" “very public”. What I guess was less well covered, I missed it until a friend pointed me to it the other day, is that Brad Lovering has &lt;a href="http://www.microsoft.com/presspass/exec/techfellow/lovering/default.mspx"&gt;left&lt;/a&gt; as well. That’s the official comment. It was also covered &lt;a href="http://business-news.thestreet.com/link/?http://www.zdnet.com/blog/microsoft/microsoft-to-tweak-employee-benefits-and-more-news-of-the-week/7609;;;http://business-news.thestreet.com/technology-news/2010/10/08/a/708814653-microsoft-to-tweak-employee-benefits/;;;http://business-news.thestreet.com/technology-news/2010/10/08/a/708814653-microsoft-to-tweak-employee-benefits/"&gt;here&lt;/a&gt; by Mary Jo, who doesn’t miss a thing. if you’ve never heard of him, shame on you. He was a technical fellow (only Ray was more technically senior I believe) and he was also &lt;a href="http://www.zdnet.com/blog/microsoft/microsoft-big-brains-brad-lovering/1691?tag=content;search-results-rivers"&gt;Mr Oslo&lt;/a&gt; - but you &lt;a href="http://www.pluralsight-training.net/community/blogs/jfancey/archive/2010/09/24/goodbye-quot-oslo-quot.aspx"&gt;know&lt;/a&gt; what happened to that recently, He’s done some incredible work over the last 22 years and I’m sure many people will miss him.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>96405</id><published>2010-10-31T17:12:17.0-05:00</published><updated>2010-10-31T17:12:17.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">TechEd Europe Berlin</title><content type="html">&lt;p&gt;I’m excited to be going back to &lt;a href="http://europe.msteched.com"&gt;TechEd&lt;/a&gt; this year which runs from 8-12 November. I’m co-presenting two sessions:&lt;/p&gt;  &lt;h5&gt;ASI301-IS - Connecting SharePoint Server to Existing Investments in IBM Legacy Applications &amp;amp; Data&lt;/h5&gt;  &lt;p&gt;Here we’re going to present a demo-loaded session showing a slew of options for connecting SharePoint to host data and applications. We’re planning to show not just the standard ‘read only’ approach of surfacing data in SharePoint but also look at how to build data-driven applications in SharePoint.&lt;/p&gt;  &lt;p&gt;&lt;a href="http://europe.msteched.com/registration"&gt;&lt;/a&gt;&lt;/p&gt;  &lt;h5&gt;ASI301-LNC - Demo: BizTalk Server 2010&lt;/h5&gt;  &lt;p&gt;Here I’ll be helping Tony Meleg present a new BizTalk PO application and something I’m a big advocate of - BAM integration with SharePoint and visualization using Silverlight.&lt;/p&gt;  &lt;p&gt;I’ll also be on the AppPlat booth on Wednesday, so stop by and say hi if you’re there too.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>96409</id><published>2010-11-01T09:53:37.0-05:00</published><updated>2010-11-01T09:53:37.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Orchestration vs WF 4.0</title><content type="html">&lt;p&gt;Here’s something I’ve been meaning to do for a *really* long time. One of the good things about WF 4.0 compared to 3.0/3.5 (and AppFabric) is that performance has been a primary focus. The whole serialization and persistence model has had a total overhaul. So I thought I’d show how BizTalk orchestration and WF 4.0 stack up now. Orchestration has a lot of smarts to make it quick, but you can’t get away from the facts; it uses MS DTC heavily with multiple SQL Server databases to do its job and requires at least 2 hops through the message box for a synchronous request/reply pattern such as a Web service implementation with orchestration. &lt;/p&gt;  &lt;p&gt;A cool new feature of BizTalk 2010 is that you can now use the BizTalk mapper from WF as well as consume WCF-based line of business (LOB) adapters. This makes comparing a ‘real world’ pattern interesting. What I’m going to show here is a performance comparison of an AppFabric solution with a BizTalk one. I’ve implemented both an orchestration and a workflow with equivalent functionality: implement a Web service end point that takes a message, maps it, and sends a response back. They look like this:&lt;/p&gt;  &lt;table width="400" cellpadding="2" cellspacing="0" border="1"&gt;&lt;tbody&gt;     &lt;tr&gt;       &lt;td width="201" valign="top"&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/Workflow_5F00_4A76EA77.png"&gt;&lt;img height="244" width="153" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/Workflow_5F00_thumb_5F00_38D6D9DF.png" alt="Workflow" border="0" title="Workflow" style="border-bottom: 0px; border-left: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px" /&gt;&lt;/a&gt;&lt;/td&gt;        &lt;td width="197" valign="top"&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/orch_5F00_5DF4244B.png"&gt;&lt;img height="244" width="122" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/orch_5F00_thumb_5F00_232C7B75.png" alt="orch" border="0" title="orch" style="border-bottom: 0px; border-left: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px" /&gt;&lt;/a&gt;&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="201" valign="top"&gt;         &lt;p align="center"&gt;Workflow&lt;/p&gt;       &lt;/td&gt;        &lt;td width="197" valign="top"&gt;         &lt;p align="center"&gt;Orchestration&lt;/p&gt;       &lt;/td&gt;     &lt;/tr&gt;   &lt;/tbody&gt;&lt;/table&gt;  &lt;p&gt;Both cases are almost identical, we receive a request, map it to a response variable/message and send the response back. Simples. Importantly, both are using the exact same map and associated schemas it uses.&lt;/p&gt;  &lt;p&gt;Now, usual caveats for such performance work. I ran the tests on my laptop, invoked over a gigabit local network from another machine using VS 2010’s load test capabilities. The laptop has 8GB RAM, 64 bit Windows 7 and a dual-core I7 proc with HT – so 4 in total. The disk is an SSD rated at ~280MB/sec read/write. It would have made a decent server not so long ago. Of course, it *isn’t* a server, so these results should not be assumed to be right on the money, but they should give a good comparative measurement.&lt;/p&gt;  &lt;p&gt;First, the orchestration was tested. For this I ran the following load profile:&lt;/p&gt;  &lt;table width="400" cellpadding="2" cellspacing="0" border="1"&gt;&lt;tbody&gt;     &lt;tr&gt;       &lt;td width="199" valign="top"&gt;&lt;strong&gt;Setting&lt;/strong&gt;&lt;/td&gt;        &lt;td width="199" valign="top"&gt;&lt;strong&gt;Value&lt;/strong&gt;&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Max User Load&lt;/td&gt;        &lt;td width="199" valign="top"&gt;25&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Duration&lt;/td&gt;        &lt;td width="199" valign="top"&gt;2 minutes&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Number of agents&lt;/td&gt;        &lt;td width="199" valign="top"&gt;1&lt;/td&gt;     &lt;/tr&gt;   &lt;/tbody&gt;&lt;/table&gt;  &lt;p&gt;These are the results I got:&lt;/p&gt;  &lt;table width="400" cellpadding="2" cellspacing="0" border="1"&gt;&lt;tbody&gt;     &lt;tr&gt;       &lt;td width="199" valign="top"&gt;&lt;strong&gt;Result&lt;/strong&gt;&lt;/td&gt;        &lt;td width="199" valign="top"&gt;&lt;strong&gt;Value&lt;/strong&gt;&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Total tests&lt;/td&gt;        &lt;td width="199" valign="top"&gt;2,072&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Average test time&lt;/td&gt;        &lt;td width="199" valign="top"&gt;1.40 sec&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Tests/sec&lt;/td&gt;        &lt;td width="199" valign="top"&gt;17.3&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;% CPU&lt;/td&gt;        &lt;td width="199" valign="top"&gt;46.8&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Fastest&lt;/td&gt;        &lt;td width="199" valign="top"&gt;0.9 sec&lt;/td&gt;     &lt;/tr&gt;   &lt;/tbody&gt;&lt;/table&gt;  &lt;p&gt;Next up, the workflow using the same load profile as before:&lt;/p&gt;  &lt;table width="400" cellpadding="2" cellspacing="0" border="1"&gt;&lt;tbody&gt;     &lt;tr&gt;       &lt;td width="199" valign="top"&gt;&lt;strong&gt;Result&lt;/strong&gt;&lt;/td&gt;        &lt;td width="199" valign="top"&gt;&lt;strong&gt;Value&lt;/strong&gt;&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Total tests&lt;/td&gt;        &lt;td width="199" valign="top"&gt;8,978&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Average test time&lt;/td&gt;        &lt;td width="199" valign="top"&gt;0.29 sec&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Tests/sec&lt;/td&gt;        &lt;td width="199" valign="top"&gt;74.8&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;% CPU&lt;/td&gt;        &lt;td width="199" valign="top"&gt;55.4&lt;/td&gt;     &lt;/tr&gt;      &lt;tr&gt;       &lt;td width="199" valign="top"&gt;Fastest&lt;/td&gt;        &lt;td width="199" valign="top"&gt;0.2 sec&lt;/td&gt;     &lt;/tr&gt;   &lt;/tbody&gt;&lt;/table&gt;  &lt;p&gt;Ok, as you can see, by any of these measures AppFabric (and by definition WF 4 and WCF 4) is quicker. Around 4x faster in terms of thruput and number of tests executed. To get these results (and make them fairer) I turned on the SQL DB persistence in AppFabric in inetmgr to make it do some additional IO to SQL.  I also brought down the BTS polling interval settings (500ms by default) to 50ms. This is super-easy in BizTalk 2010 as I can simply set them in the Admin console on a host basis – 50 is the minimum that I can set in the UI. &lt;/p&gt;  &lt;p&gt;BizTalk traditionally batches messages for processing, either in queues in the database or via its adapters. This can be very efficient for say EDI interchanges where a single file may contain 000’s of transaction records. That strategy doesn’t work well for synchronous single request/response pairs though, as the batch size is 1 meaning that no efficiency can be gained without introducing latency. Bringing down the polling interval improves the BizTalk’s results but still is some distance from AppFabric. So, why is AppFabric faster? Well, for a few reasons, firstly the architecture is very different. Instead of having a separation of adapter to pipeline to the MessageBox database, these all boil down to a WCF receive activity with no database. That’s only used when I *want* to persist (or rather my activities), not by default. With BizTalk you have no control over these points and, as I mentioned, each uses an MS-DTC transaction which is not cheap from a performance perspective. I have this problem twice in BizTalk because of the way ports work. Every message that passes through a port (send or receive) passes through the MessageBox, and that’s got a default polling interval of 500ms. Which means for a sync-on-async pattern like BizTalk’s I could wait 1 second plus the time taken to do what I asked. WF just lets me wire up a send activity and I get a correlated response back to the caller. This is made easy by the SequentialService activity that provides this pairing.&lt;/p&gt;  &lt;p&gt;Arguably this is a test that exploits a strength of WCF/WF and a weaknesses of BizTalk Server. And that’s really the point. However I think some people are under the impression that WCF+WF is much lower latency than it is. It’s lower yes, but obviously there are a number of factors then that can be used to improve both of them further. Next time, I’ll look at other features of the AppFabric/WCF/WF story that provide other BizTalk-like features and how they compare.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>99899</id><published>2011-05-30T16:11:40.0-05:00</published><updated>2011-05-30T16:11:40.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">TechDays 2011 – Reusing BizTalk Maps</title><content type="html">&lt;p&gt;Thanks to everyone who attended my &lt;a href="http://uktechdays.cloudapp.net/techdays-live/mission-critical-database.aspx"&gt;session&lt;/a&gt; last week with Kevin Smith on AppFabric, Azure and BizTalk. I wanted to cover one of the demos I did in more detail to explain the process I showed and the steps involved in taking an existing BizTalk map and hosting it in Windows Workflow.&lt;/p&gt;  &lt;p&gt;First, a few tidbits. It’s not possible to simply reference a BizTalk map assembly from your workflow project and select the required map from it. I’ve been asked this a few times, so I thought I’d clarify it here. Instead what you get is the mapper activity which shows up in the BizTalk tab of the workflow toolbox. This, unlike the experience in BizTalk allows you to pass any .net type in not just XmlDocuments and schema-backed messages. This makes it very WCF friendly (as workflow also is) allowing you to create DataContracts type for example and map from one to the other. While this is useful, it is of course worth bearing in mind that the schema-based message constraints that the likes of BizTalk expose at design time do not exist at run time – I can pass xml in at runtime without a schema if I like. Mapping in workflow just makes this explicit at design time too. Because of this the mapper is compatible with existing BizTalk maps. &lt;/p&gt;  &lt;p&gt;The process I showed on Thursday is as follows - &lt;/p&gt;  &lt;p&gt;1. Add the btm file to your workflow project. Do not add the corresponding .cs file that BizTalk generates, we’ll recreate that in the workflow project.&lt;/p&gt;  &lt;p&gt;2. Set the Custom Tool to Map Compiler as shown below. As soon as you do this, a .cs file corresponding to the map will be generated. This derives from Microsoft.XLANGs.BaseTypes.TransformBase just like a standard BizTalk map does. However, four additional property getters are also created. These are to specify the input and output types as well as the serializers to use (DataContractSerializer or XmlSerializer).&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_499AF34A.png"&gt;&lt;img height="220" width="777" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_33C0E520.png" alt="image" border="0" title="image" style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;p&gt;3. The third step is to set the Custom Tool Namespace shown above. This takes the following form:&lt;/p&gt;  &lt;p&gt;&lt;strong&gt;Services:&lt;/strong&gt;&amp;lt;MapName&amp;gt;&lt;strong&gt;:&lt;/strong&gt;&amp;lt;InputType&amp;gt;&lt;strong&gt;:&lt;/strong&gt;&amp;lt;OutputType&amp;gt;&lt;strong&gt;:AA&lt;/strong&gt;&lt;/p&gt;  &lt;p&gt;I have no idea what the :AA at the end is for, it can be removed without any ill effects. So, in the example above, I’ve set the input and output types to System.Xml.Linq.XElement.&lt;/p&gt;  &lt;p&gt;4. Now I can simply drag and drop a Mapper activity to the design surface and set the input and output types in the dialog that appears.&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_2FF31A83.png"&gt;&lt;img height="149" width="244" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_66ECF8BC.png" alt="image" border="0" title="image" style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;p&gt;5. All being well, once the map is on the workflow design surface, by clicking ‘Edit’ I can choose to create a new map, or the map I added in step 1 from the drop-down. &lt;/p&gt;  &lt;p&gt;What you can’t do is change the types of an existing Mapper activity via the designer. This is why it didn’t show up in my demo in the talk – my bad. That’s because the arguments are specified in the xaml and not surfaced in the activity designer. Switching to the xaml you can see what’s going on:&lt;/p&gt;  &lt;p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt; text-autospace: ; mso-layout-grid-align: none"&gt;&lt;span style="font-family: consolas; color: blue; font-size: 12pt"&gt;&amp;lt;&lt;/span&gt;&lt;span style="font-family: consolas; color: #a31515; font-size: 12pt"&gt;mscm:Mapper &lt;/span&gt;&lt;span style="font-family: consolas; color: red; font-size: 12pt"&gt;x:TypeArguments&lt;/span&gt;&lt;span style="font-family: consolas; color: blue; font-size: 12pt"&gt;=&lt;/span&gt;&lt;span style="font-family: consolas; font-size: 12pt"&gt;"&lt;span style="color: blue"&gt;sx:XmlDocument, sx:XmlDocument&lt;/span&gt;"&lt;span style="color: blue"&gt; &lt;/span&gt;&lt;span style="color: red"&gt;BizTalkMapClass&lt;/span&gt;&lt;span style="color: blue"&gt;=&lt;/span&gt;"&lt;span style="color: blue"&gt;{x:Null}&lt;/span&gt;"&lt;span style="color: blue"&gt; &lt;/span&gt;&lt;span style="color: red"&gt;Input&lt;/span&gt;&lt;span style="color: blue"&gt;=&lt;/span&gt;"&lt;span style="color: blue"&gt;{x:Null}&lt;/span&gt;"&lt;/span&gt;&lt;span style="font-family: consolas; font-size: 12pt"&gt;&lt;span style="color: blue"&gt; /&amp;gt;       &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;       &lt;p class="MsoNormal"&gt;   &lt;/p&gt;&lt;p&gt;Here, the TypeArguments attribute is specifying the input and output types in the above dialog. Once the the types are specified in this dialog, they cannot be changed again in the UI and must be edited in the xaml directly.&lt;/p&gt;   &lt;p&gt;One further option when bringing up the “Select a map” dialog from the Edit button is the Advanced dialog. This lets you specify which serializer you want to use. &lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_72A23FEE.png"&gt;&lt;img height="234" width="244" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_5B93BEB2.png" alt="image" border="0" title="image" style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" /&gt;&lt;/a&gt; &lt;/p&gt;  &lt;p&gt;6. The final step is to specify the input and output variables for the map. These can simply be workflow variables of a compatible type, as you’d expect.&lt;/p&gt;  &lt;p&gt;A couple of closing comments are that you must have a licensed version of BizTalk Server to use this activity in a production environment. One licence per server the activity is used on. It’s important to note that the mapper has dependencies on BizTalk assemblies, hence the licensing requirement. It’s also a shame the test capability of BizTalk isn’t provided in the IDE for workflow. This is very useful in BizTalk projects, allowing an input document to be provided and the map tested and debugged directly from within VS. I’ll talk more about this in my next post on the subject.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>104361</id><published>2011-10-26T06:44:41.0-05:00</published><updated>2011-10-26T06:44:41.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">Microsoft Rosyln released</title><content type="html">&lt;p&gt;One of the more interesting talks at &lt;a href="file://\\build"&gt;\\build&lt;/a&gt; was given by Anders Hejlsberg (always fascinating) on codename Rosyln that you can watch &lt;a href="http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-816T"&gt;here&lt;/a&gt;. The CTP has just been released - you can download it &lt;a href="http://www.microsoft.com/download/en/details.aspx?id=27746"&gt;here&lt;/a&gt;.&lt;/p&gt;  &lt;p&gt;Essentially, Roslyn provides a really *nice* way of working with code by providing both an API (which can be used to generate code, examine code and create VS extensions to the likes of Intellisense and SmartTags) as well as an interactive window (C# only in the CTP) that provides a REPL (read-evaluate-print-loop). I like REPLs and their instant gratification – something was prevalent back in the home computer days that died somewhere along the way becoming resigned to functional programming language implementations (e.g. F# has one). For example, I could just type in the following and hit &amp;lt;enter&amp;gt; :-&lt;/p&gt;  &lt;p&gt;&amp;gt; for (int i = 0; i &amp;lt; 10; i++) { Console.WriteLine("I is " + i.ToString()); }&lt;/p&gt;  &lt;p&gt;Which, of course, yields the following output:-    &lt;br /&gt;I is 0     &lt;br /&gt;I is 1     &lt;br /&gt;I is 2     &lt;br /&gt;I is 3     &lt;br /&gt;I is 4     &lt;br /&gt;I is 5     &lt;br /&gt;I is 6     &lt;br /&gt;I is 7     &lt;br /&gt;I is 8     &lt;br /&gt;I is 9     &lt;br /&gt;&amp;gt; &lt;/p&gt;  &lt;p&gt;Why is Roslyn cool? If you’ve ever done anything non-trivial with the CodeDOM in .Net you’ll know that this quickly becomes less about the ‘code model’ and more about pasting opaque strings of code into the generation process. The reason for this is that the CodeDOM doesn’t provide a full syntax tree approach covering the whole language (e.g. switch statements are omitted). This makes it less than ideal. Rosyln’s goal is to open up the “black box” compilers and provide the ability to work with this full code model. In this way conversion from C# to VB becomes as trivial as copy-and-paste (one of the samples). This is possible because all code is represented in the model and as such can simply be output in one of the supported languages. And that’s possible because the syntax tree created from the source code has no loss of fidelity – everything that was in the original source file is represented including formatting, comments,  white space etc. (referred in the model as trivia). This enables round-tripping between the source and the equivalent syntax tree and of course converted in the process: C# source –&amp;gt; abstract syntax tree –&amp;gt; VB.NET source. &lt;/p&gt;  &lt;p&gt;Four APIs are providing covering the whole compilation pipeline from parsing to emitting IL including creating extensions. Other side benefits are the ability to create script files (csx for C#) that can contain statements that have no outer context (such as a class).&lt;/p&gt;  &lt;p&gt;Roslyn installs a bunch of templates to create various types of projects and a bunch of great samples. Expect more as I delve into it further &lt;img src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/wlEmoticon_2D00_smile_5F00_482A7D11.png" alt="Smile" class="wlEmoticon wlEmoticon-smile" style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" /&gt;.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry><entry><id>104646</id><published>2011-11-07T15:52:35.0-05:00</published><updated>2011-11-07T15:52:35.0-05:00</updated><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post"></category><title type="text">BizTalk 2010 Schema mapping issues</title><content type="html">&lt;p&gt;I’ve just raised a bug with the BizTalk product group on this but I thought I’d explain here as others have also encountered it. For example, the issue is discussed, without a solution, on &lt;a href="http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/b8e15419-049c-4ed3-bd80-8e709bef4b2c"&gt;this&lt;/a&gt; thread and in the various MSDN fora. &lt;/p&gt;  &lt;p&gt;The problem concerns an error received in the BizTalk Admin console after a schema and map that uses the schema is deployed:&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_05D344E8.png"&gt;&lt;img height="127" width="496" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_47F6AD6B.png" alt="image" border="0" title="image" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;“Schema referenced by Map '&amp;lt;mapname&amp;gt;' has been deleted. The local, cached version of the BizTalk Server group configuration is out of date. You must refresh the BizTalk Server group configuration before making further changes. (Microsoft.BizTalk.Administration.SnapIn)”&lt;/p&gt;  &lt;p&gt;Note that this is a new issue with BizTalk 2010. Because of this you’re most likely to encounter it when you migrated a solution from a previous version of the product. With some effort, I managed to repro it (you can download it &lt;a href="https://connect.microsoft.com/BizTalk/feedback/details/698568/using-a-schema-that-references-another-that-is-used-by-a-map-causes-error-in-management-console"&gt;here&lt;/a&gt;) and understand what is causing the problem. As the error indicates, correctly, the issue is caused when a deployed map is referencing a schema that doesn’t exist. This can occur when a schema is defined that only references other schema to define its content, as in the example below – i.e. it contains no type definitions itself:&lt;/p&gt;  &lt;p&gt;&amp;lt;?xml version="1.0" encoding="utf-16"?&amp;gt;    &lt;br /&gt;&amp;lt;xs:schema xmlns="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:b="&lt;a href="http://schemas.microsoft.com/BizTalk/2003&amp;quot;"&gt;http://schemas.microsoft.com/BizTalk/2003"&lt;/a&gt; targetNamespace="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:xs="&lt;a href="http://www.w3.org/2001/XMLSchema&amp;quot;"&gt;http://www.w3.org/2001/XMLSchema"&lt;/a&gt;&amp;gt;     &lt;br /&gt;  &amp;lt;xs:include schemaLocation=".\Schema2.xsd" /&amp;gt;     &lt;br /&gt;  &amp;lt;xs:include schemaLocation=".\Schema3.xsd" /&amp;gt;     &lt;br /&gt;&amp;lt;/xs:schema&amp;gt;&lt;/p&gt;  &lt;p&gt;This schema references two others -&lt;/p&gt;  &lt;p&gt;&amp;lt;?xml version="1.0" encoding="utf-16"?&amp;gt;    &lt;br /&gt;&amp;lt;xs:schema xmlns="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:b="&lt;a href="http://schemas.microsoft.com/BizTalk/2003&amp;quot;"&gt;http://schemas.microsoft.com/BizTalk/2003"&lt;/a&gt; targetNamespace="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:xs="&lt;a href="http://www.w3.org/2001/XMLSchema&amp;quot;"&gt;http://www.w3.org/2001/XMLSchema"&lt;/a&gt;&amp;gt;     &lt;br /&gt;  &amp;lt;xs:element name="Root"&amp;gt;     &lt;br /&gt;    &amp;lt;xs:complexType /&amp;gt;     &lt;br /&gt;  &amp;lt;/xs:element&amp;gt;     &lt;br /&gt;&amp;lt;/xs:schema&amp;gt;&lt;/p&gt;  &lt;p&gt;and&lt;/p&gt;  &lt;p&gt;&amp;lt;?xml version="1.0" encoding="utf-16"?&amp;gt;    &lt;br /&gt;&amp;lt;xs:schema xmlns="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:b="&lt;a href="http://schemas.microsoft.com/BizTalk/2003&amp;quot;"&gt;http://schemas.microsoft.com/BizTalk/2003"&lt;/a&gt; targetNamespace="&lt;a href="http://ReproSchemaBug.Schema1&amp;quot;"&gt;http://ReproSchemaBug.Schema1"&lt;/a&gt; xmlns:xs="&lt;a href="http://www.w3.org/2001/XMLSchema&amp;quot;"&gt;http://www.w3.org/2001/XMLSchema"&lt;/a&gt;&amp;gt;     &lt;br /&gt;  &amp;lt;xs:element name="Root2"&amp;gt;     &lt;br /&gt;    &amp;lt;xs:complexType /&amp;gt;     &lt;br /&gt;  &amp;lt;/xs:element&amp;gt;     &lt;br /&gt;&amp;lt;/xs:schema&amp;gt;&lt;/p&gt;  &lt;p&gt;In the BizTalk schema editor, my root schema therefore appears as follows, and as you can see it has two root nodes. &lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_611207A3.png"&gt;&lt;img height="121" width="675" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_6A8AC619.png" alt="image" border="0" title="image" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;Finally, in this example, which I’ve deliberately kept as simple as possible, I have a map, shown below. Not the world’s most complex map granted, but I think you see what it’s doing. I simply have my ‘root’ schema set on both sides, and picked the ‘root’ node for each.&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_67956166.png"&gt;&lt;img height="271" width="749" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_33ECF508.png" alt="image" border="0" title="image" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;So, what’s the problem? To understand that, you need to dig into what happens when the solution is deployed. There are two tables in the management database (BizTalkMgmtDb) - bt_documentspec which holds details of message types (in this case read from the deployed schemas) and bt_MapSpec which holds details of the deployed maps and their associated message types. If the map contains references to schemas that don’t exist (which the admin console will check when you refresh it), this error will occur. For this reason it isn’t that uncommon, as simply removing the schema assembly for a map manually would cause it. However, in this case I was moving a solution that worked in a prior version of BizTalk to 2010.&lt;/p&gt;  &lt;p&gt;Looking in SQL, we can see these two tables by running the following queries&lt;/p&gt;  &lt;p&gt;select * from bt_documentspec where docspec_name like '%repro%'&lt;/p&gt;  &lt;p&gt;select * from dbo.bt_MapSpec where outdoc_docspec_name like '%repro%'&lt;/p&gt;  &lt;p&gt;This results in this output - &lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_57C5A695.png"&gt;&lt;img height="251" width="1142" src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/image_5F00_thumb_5F00_6B42E069.png" alt="image" border="0" title="image" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p&gt;Now, what we should see is the indoc_docspec and outdoc_docspec_name columns in the bt_MapSpec table have corresponding entries in the bt_documentspec table to tie the map to its schemas. However, as you can see, we do not. What you see is that the “+Root” is missing in the bt_documentspec table. Fairly obviously, the “+” separator is used to specify the rootnode in the schema that was selected in the map – as schemas can of course have more than one, and there must be a way to disambiguate multiple root nodes for the same schema. So, what we should see in the bt_documentspec table is the docspec_name column suffixed with the “+rootnode” names as well.&lt;/p&gt;  &lt;p&gt;Whilst this appears to be a bug, there are some simple workarounds (as I’ve said, I’ve raised it already with Microsoft support and will report back when I hear more). This is really the reason for this post – how to fix it now if you hit it.&lt;/p&gt;  &lt;p&gt;There are two ways I’ve found so far, either update the schema to add a ‘local’ rootnode – that fixes the problem then for all the root nodes defined. If changing the schema is not an issue, then updating the management database manually to add the “+rootnode” will of course work. In my case, the following SQL fixes the problem:&lt;/p&gt;  &lt;p&gt;update bt_documentspec set clr_typename = 'Schema1+Root' where docspec_name like 'ReproSchemaBug.Schema1' &lt;/p&gt;  &lt;p&gt;To be complete, an additional entry is needed, for the second root node – Schema1+Root2. If you’ve got this far I’m sure you can write the SQL to do that yourself &lt;img src="http://www.pluralsight-training.net/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/jfancey/wlEmoticon_2D00_smile_5F00_44D0D751.png" alt="Smile" class="wlEmoticon wlEmoticon-smile" style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" /&gt;. &lt;/p&gt;  &lt;p&gt;One other thing I find odd, is that trying this on a BTS 2006 VM, deploys just fine (as expected). However, looking in the SQL tables, the data is identical (the +nodename suffix is not required) – and yet it works. This must mean that the Management Console itself has introduced this change in 2010.&lt;/p&gt;  &lt;p&gt;I do hope this helps some of you out there who hit this issue. If I find out any more, I’ll post back to this entry.&lt;/p&gt;</content><author><name>jon-fancey</name></author></entry></feed>